
# 第10回課題

* 第５回で構成した環境をCloudFormationで作成する。

## VScodeにCloudFormation用の拡張機能を追加する。

* CloudFormation for VScode, cfn-lint ,indent-rainbowの三種類を導入
* 絶対に入れたほうが良いと感じた。書き方を間違えていたり、指定されていない物を引用していたりするとその点に関してエラー文で教えてくれたり、インデントが色づくため関係性が視認しやすい。

## 理解するのに時間がかかった点

### ParametersとResourses

* Parametersはスタックを作る際に入力したい項目を指定する領域で、ResoursesのPropertiesで引用することができる。例えばRDSのパスワードなどをリソースで指定するとテンプレート内に直接書かねばならずパスワードの管理としては危ない。その場合にパラメータで指定しておけば、スタック作成時に指定ができる為流出などに対応することが可能である。

### Outputs

* OutputsはImportに記載した場所あてに値を渡すための領域である。渡す先のテンプレートファイルでは指定した箇所に(例えばVPCIdなど)に「!ImportValue xxxxx」という形で出力させることができる。

### EC2,RDSのプロパティ

* EC2はAMIの指定方法やAZなどで非常に躓いた。現状東京リージョン以外で利用するつもりが無いので「ImageId: ami-0b51fe1c0254d8fc9」で直接指定したが、Parametersで設定を行うとコンソール上で選択できるようになるようなので練習がてらチャレンジしたいを思う。

* RDSはコンソール上で作成していた時にかなり直感的に作成していたんだなと実感した。SubnetGroupやストレージのサイズなどスタックを作成したときにエラー出て初めて、「いるんやった！」と気が付いた。ALBの設定でも感じたが、テンプレート上で全部書き起こす必要がある為に見落としが頻繁に発生する。こういったのは慣れもあると思うが、何が指定する必要があるかしっかり把握しておかねばならないと感じた。

![testテンプレート作成](/lecture10-img/testtemp.png)